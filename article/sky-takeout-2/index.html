<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.20" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><meta property="og:url" content="https://github.com/MrSibe/MrSibe.github.io/article/sky-takeout-2/"><meta property="og:site_name" content="西贝的博客"><meta property="og:title" content="苍穹外卖 | Day 2 员工与菜品业务逻辑"><meta property="og:description" content="新增员工 DTO 通过查看接口文档和项目原型，设计 DTO 类。 DTO：Data Transfer Object，数据传输对象，主要用于各个层之间传输数据。 当前端提交的数据和实体类中对应的属性差别比较大时，建议使用DTO来封装数据 DTO 一般会通过 Lombok 的 @Data 注解自动生成 getter、setter 和 toString 方法..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-09-14T03:18:42.000Z"><meta property="article:modified_time" content="2025-09-14T03:18:42.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"苍穹外卖 | Day 2 员工与菜品业务逻辑","image":[""],"dateModified":"2025-09-14T03:18:42.000Z","author":[]}</script><link rel="icon" type="image/png" href="https://MrSibe.github.io/logo.png"><script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?bf916539da7692916f7396946174ebaa";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-BZZVEEJVCS"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-BZZVEEJVCS');
    </script><title>苍穹外卖 | Day 2 员工与菜品业务逻辑 | 西贝的博客</title><meta name="description" content="新增员工 DTO 通过查看接口文档和项目原型，设计 DTO 类。 DTO：Data Transfer Object，数据传输对象，主要用于各个层之间传输数据。 当前端提交的数据和实体类中对应的属性差别比较大时，建议使用DTO来封装数据 DTO 一般会通过 Lombok 的 @Data 注解自动生成 getter、setter 和 toString 方法..."><link rel="preload" href="/assets/style-BULuK4Gr.css" as="style"><link rel="stylesheet" href="/assets/style-BULuK4Gr.css"><link rel="modulepreload" href="/assets/app-DMdwLNUM.js"><link rel="modulepreload" href="/assets/index.html-DiwOpM9f.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-aa916f90><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-685c0708></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-685c0708> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-aa916f90 data-v-3f80b9aa><div class="vp-navbar" vp-navbar data-v-3f80b9aa data-v-ac3ac97f><div class="wrapper" data-v-ac3ac97f><div class="container" data-v-ac3ac97f><div class="title" data-v-ac3ac97f><div class="vp-navbar-title" data-v-ac3ac97f data-v-916f5680><a class="vp-link no-icon link title" href="/" data-v-916f5680 data-v-591c3aa5><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/logo.png" alt data-v-fcc09e2b><!--]--><!--[--><img class="vp-image light logo" style="" src="/logo.png" alt data-v-fcc09e2b><!--]--><!--]--><!--]--><span data-v-916f5680>西贝的博客</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-ac3ac97f><div class="content-body" data-v-ac3ac97f><!--[--><!--]--><div class="vp-navbar-search search" data-v-ac3ac97f><div class="search-wrapper" data-v-33e6eaaf><!----><div id="local-search" data-v-33e6eaaf><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-33e6eaaf><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-ac3ac97f data-v-95bb5f43><span id="main-nav-aria-label" class="visually-hidden" data-v-95bb5f43>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/" tabindex="0" data-v-95bb5f43 data-v-33b2ce2d data-v-591c3aa5><!--[--><!----><span data-v-33b2ce2d>首页</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/" tabindex="0" data-v-95bb5f43 data-v-33b2ce2d data-v-591c3aa5><!--[--><!----><span data-v-33b2ce2d>博客</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-95bb5f43 data-v-ae1a52bd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-ae1a52bd><span class="text" data-v-ae1a52bd><!----><!----><span data-v-ae1a52bd>笔记</span><span class="vpi-chevron-down text-icon" data-v-ae1a52bd></span></span></button><div class="menu" data-v-ae1a52bd><div class="vp-menu" data-v-ae1a52bd data-v-20312dae><div class="items" data-v-20312dae><!--[--><!--[--><div class="vp-menu-link" data-v-20312dae data-v-00fb2637><a class="vp-link no-icon link" href="/CS_61B/y2cnvzip/" data-v-00fb2637 data-v-591c3aa5><!--[--><!----> CS 61B<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-20312dae data-v-00fb2637><a class="vp-link no-icon link" href="/CS-168/01-intro/" data-v-00fb2637 data-v-591c3aa5><!--[--><!----> CS 168<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-20312dae data-v-00fb2637><a class="vp-link no-icon link" href="/notes/hot100/001-twosum.html" data-v-00fb2637 data-v-591c3aa5><!--[--><!----> Leetcode Hot 100<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/article/fdax57qt/" tabindex="0" data-v-95bb5f43 data-v-33b2ce2d data-v-591c3aa5><!--[--><!----><span data-v-33b2ce2d>友情链接🔗</span><!--]--><!----></a><!--]--><!--]--></nav><!----><div class="vp-navbar-appearance appearance" data-v-ac3ac97f data-v-065bb985><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-065bb985 data-v-265d27bb data-v-fcd95930><span class="check" data-v-fcd95930><span class="icon" data-v-fcd95930><!--[--><span class="vpi-sun sun" data-v-265d27bb></span><span class="vpi-moon moon" data-v-265d27bb></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-ac3ac97f data-v-d8da0505 data-v-b12a35bb><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-b12a35bb data-v-2bb9cbdb><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-ac3ac97f data-v-ca0c2476 data-v-ae1a52bd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-ae1a52bd><span class="vpi-more-horizontal icon" data-v-ae1a52bd></span></button><div class="menu" data-v-ae1a52bd><div class="vp-menu" data-v-ae1a52bd data-v-20312dae><!----><!--[--><!--[--><!----><div class="group" data-v-ca0c2476><div class="item appearance" data-v-ca0c2476><p class="label" data-v-ca0c2476>外观</p><div class="appearance-action" data-v-ca0c2476><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-ca0c2476 data-v-265d27bb data-v-fcd95930><span class="check" data-v-fcd95930><span class="icon" data-v-fcd95930><!--[--><span class="vpi-sun sun" data-v-265d27bb></span><span class="vpi-moon moon" data-v-265d27bb></span><!--]--></span></span></button></div></div></div><div class="group" data-v-ca0c2476><div class="item social-links" data-v-ca0c2476><div class="vp-social-links social-links-list" data-v-ca0c2476 data-v-b12a35bb><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-b12a35bb data-v-2bb9cbdb><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-ac3ac97f data-v-91a43e8b><span class="container" data-v-91a43e8b><span class="top" data-v-91a43e8b></span><span class="middle" data-v-91a43e8b></span><span class="bottom" data-v-91a43e8b></span></span></button></div></div></div></div><div class="divider" data-v-ac3ac97f><div class="divider-line" data-v-ac3ac97f></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-aa916f90 data-v-e54c6fd4><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-e54c6fd4><span class="vpi-align-left menu-icon" data-v-e54c6fd4></span><span class="menu-text" data-v-e54c6fd4>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-e54c6fd4 data-v-9deacfaf><button data-v-9deacfaf>返回顶部</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-aa916f90 data-v-f6244567><div class="vp-doc-container is-blog" data-v-f6244567 data-v-31197946><!--[--><!--]--><div class="container" data-v-31197946><!----><div class="content" data-v-31197946><div class="content-container" data-v-31197946><!--[--><!--]--><main class="main" data-v-31197946><nav class="vp-breadcrumb" data-v-31197946 data-v-d42f1eb8><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-d42f1eb8><!--[--><li property="itemListElement" typeof="ListItem" data-v-d42f1eb8><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-d42f1eb8 data-v-591c3aa5><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-d42f1eb8></span><meta property="name" content="首页" data-v-d42f1eb8><meta property="position" content="1" data-v-d42f1eb8></li><li property="itemListElement" typeof="ListItem" data-v-d42f1eb8><a class="vp-link no-icon link breadcrumb" href="/blog/" property="item" typeof="WebPage" data-v-d42f1eb8 data-v-591c3aa5><!--[-->博客<!--]--><!----></a><span class="vpi-chevron-right" data-v-d42f1eb8></span><meta property="name" content="博客" data-v-d42f1eb8><meta property="position" content="2" data-v-d42f1eb8></li><li property="itemListElement" typeof="ListItem" data-v-d42f1eb8><a class="vp-link no-icon link breadcrumb" href="/blog/categories/?id=df53ca" property="item" typeof="WebPage" data-v-d42f1eb8 data-v-591c3aa5><!--[-->computer<!--]--><!----></a><span class="vpi-chevron-right" data-v-d42f1eb8></span><meta property="name" content="computer" data-v-d42f1eb8><meta property="position" content="3" data-v-d42f1eb8></li><li property="itemListElement" typeof="ListItem" data-v-d42f1eb8><a class="vp-link no-icon link breadcrumb" href="/blog/categories/?id=5542b4" property="item" typeof="WebPage" data-v-d42f1eb8 data-v-591c3aa5><!--[-->苍穹外卖<!--]--><!----></a><span class="vpi-chevron-right" data-v-d42f1eb8></span><meta property="name" content="苍穹外卖" data-v-d42f1eb8><meta property="position" content="4" data-v-d42f1eb8></li><li property="itemListElement" typeof="ListItem" data-v-d42f1eb8><a class="vp-link no-icon link breadcrumb current" href="/article/sky-takeout-2/" property="item" typeof="WebPage" data-v-d42f1eb8 data-v-591c3aa5><!--[-->苍穹外卖 | Day 2 员工与菜品业务逻辑<!--]--><!----></a><!----><meta property="name" content="苍穹外卖 | Day 2 员工与菜品业务逻辑" data-v-d42f1eb8><meta property="position" content="5" data-v-d42f1eb8></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-b74507ce>苍穹外卖 | Day 2 员工与菜品业务逻辑 <!----></h1><div class="vp-doc-meta" data-v-b74507ce><p class="reading-time" data-v-b74507ce><span class="vpi-books icon" data-v-b74507ce></span><span data-v-b74507ce>约 981 字</span><span data-v-b74507ce>大约 3 分钟</span></p><!----><p class="create-time" data-v-b74507ce><span class="vpi-clock icon" data-v-b74507ce></span><span data-v-b74507ce>2025-07-11</span></p></div><!--]--><div class="_article_sky-takeout-2_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-31197946><div data-v-31197946><h2 id="新增员工" tabindex="-1"><a class="header-anchor" href="#新增员工"><span>新增员工</span></a></h2><h3 id="dto" tabindex="-1"><a class="header-anchor" href="#dto"><span>DTO</span></a></h3><p>通过查看接口文档和项目原型，设计 DTO 类。</p><blockquote><p><strong>DTO</strong>：Data Transfer Object，数据传输对象，主要用于各个层之间传输数据。 当前端提交的数据和实体类中对应的属性差别比较大时，建议使用DTO来封装数据</p></blockquote><p>DTO 一般会通过 <strong>Lombok</strong> 的 <code>@Data</code> 注解自动生成 getter、setter 和 toString 方法，非常方便。</p><blockquote><p>Lombok 其实就是一个 Java 库，它可以自动插入到编辑器和构建工具中，增强java的性能。以后你只需要一些简单的注解，就可以再也不用在类中反复去写get、equals等方法。</p></blockquote><h3 id="controller" tabindex="-1"><a class="header-anchor" href="#controller"><span>Controller</span></a></h3><blockquote><p><strong>Controller层</strong>是应用程序的入口点，主要负责<strong>接收用户请求并返回响应</strong>。它的主要职责包括： 处理前端发送的请求，并与后端服务进行交互。 调用Service层的方法来处理业务逻辑，并将结果返回给前端。 负责具体的业务模块流程的控制，调用Service层的接口来控制业务流程。 在具体项目中，Controller层会调用Service层的方法，Service层再调用Dao层中的方法。 通过这种方式，Controller层确保了前后端的有效交互和业务逻辑的处理。</p></blockquote><p>Controller 层因为处理前端的请求，就会用到 Spring 里面的 <code>@PostMapping</code> <code>@GetMapping</code> <code>RequestMapping</code> 等注解，而且函数参数会写 <code>@RequestBody</code> 这样的注解来把请求绑定到 DTO 上，具体可以看 Spring 官网的 Guide。</p><h3 id="service-层" tabindex="-1"><a class="header-anchor" href="#service-层"><span>Service 层</span></a></h3><blockquote><p><strong>Service层</strong>主要负责业务逻辑的处理和管理。它位于 Controller 层和 DAO 层之间，起到连接用户请求和数据访问的桥梁作用。</p></blockquote><p>一般来说有一个 Service 层接口和一个 ServiceImpl 的实现。Service 将 DTO 作为参数，处理例如 save、remove 等业务逻辑。</p><h3 id="mapper-层" tabindex="-1"><a class="header-anchor" href="#mapper-层"><span>Mapper 层</span></a></h3><blockquote><p>Mapper 层的主要职责是执行 SQL 语句，进行数据库的增删改查操作。Mapper 层通常与 DAO（Data Access Object）层相对应，有时两者是合并在一起使用的。Mapper 层的方法会被Service层所调用。</p></blockquote><blockquote><p>关于以上几层的详细讲解可以看这篇博客：<a href="https://blog.csdn.net/qq_38129062/article/details/88967217" target="_blank" rel="noopener noreferrer">Dao层，Mapper层，controller层，service层，model层都有什么作用</a>。</p></blockquote><p>Mapper 这里就很经常用到 Mybatis 了，黑马的源代码里面就使用了 <code>@Insert</code> 注解。</p><h3 id="相关问题" tabindex="-1"><a class="header-anchor" href="#相关问题"><span>相关问题</span></a></h3><p>JWT 令牌：联调的时候发现有问题，发现是没有给 JWT 令牌导致 JwtTokenAdminInterceptor 拒绝了请求。解决方法是 ApiFox 加上全局变量。JWT 相关的知识点之后讲。</p><p>注册重复名字的用户没有抛出异常：那就往异常处理器里面添加相关的异常处理逻辑。</p><p>如何知道当前操作人是谁：解析 JWT 令牌出当前操作人的编号，利用线程资源共享的特点，往 ThreadLocal 里塞操作人编号，然后 Service 层读取这个编号就可以了。</p><h2 id="员工分页查询" tabindex="-1"><a class="header-anchor" href="#员工分页查询"><span>员工分页查询</span></a></h2><h3 id="开发过程" tabindex="-1"><a class="header-anchor" href="#开发过程"><span>开发过程</span></a></h3><p>这里请求参数类型为 Query，不是json格式，在路径后直接拼接：`/admin/employee/page?name=zhangsan</p><p>跟新增员工一样，先处理 DTO 层（黑马已经弄好了），然后处理 common 模块的分页对象和 Result 对象，其次在 Controller 里面处理前端响应，通过 DTO 返回给 Service 层。</p><p>详情可以看黑马的讲义，这里不赘述。</p><h3 id="相关问题-1" tabindex="-1"><a class="header-anchor" href="#相关问题-1"><span>相关问题</span></a></h3><p>返回的 json 的时间字段格式有问题：在 WebMvcConfiguration 中扩展 Spring MVC 的消息转换器，统一对日期类型进行格式处理。</p><h2 id="启用禁用员工账号" tabindex="-1"><a class="header-anchor" href="#启用禁用员工账号"><span>启用禁用员工账号</span></a></h2><h3 id="开发过程-1" tabindex="-1"><a class="header-anchor" href="#开发过程-1"><span>开发过程</span></a></h3><p>先加 Controller，然后修改 Service 和 Mapper，此处不再赘述。</p><p>后面都是一样的，甚至菜品代码直接给出来了，实现都是一模一样的，都不再赘述。</p></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-31197946 data-v-fdc7726c><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-fdc7726c><span class="contributors-label" data-v-fdc7726c>贡献者: </span><span class="contributors-info" data-v-fdc7726c><!--[--><!--[--><span class="contributor" data-v-fdc7726c>xibei</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-fdc7726c><div class="pager" data-v-fdc7726c><a class="vp-link no-icon link pager-link prev" href="/article/javaweb-note/" data-v-fdc7726c data-v-591c3aa5><!--[--><span class="desc" data-v-fdc7726c>上一页</span><span class="title" data-v-fdc7726c>黑马程序员 | JavaWeb笔记</span><!--]--><!----></a></div><div class="pager" data-v-fdc7726c><a class="vp-link no-icon link pager-link next" href="/article/sky-takeout-1/" data-v-fdc7726c data-v-591c3aa5><!--[--><span class="desc" data-v-fdc7726c>下一页</span><span class="title" data-v-fdc7726c>苍穹外卖 | Day 1 起步</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-aa916f90 data-v-0c26a49a><span class="percent" data-allow-mismatch data-v-0c26a49a>0%</span><span class="show icon vpi-back-to-top" data-v-0c26a49a></span><svg aria-hidden="true" data-v-0c26a49a><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-0c26a49a></circle></svg></button><footer class="vp-footer" vp-footer data-v-aa916f90 data-v-f52e5de4><!--[--><div class="container" data-v-f52e5de4><p class="message" data-v-f52e5de4>Copyright 2020-2025 Xibei. All Rights Reserved</p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-DMdwLNUM.js" defer></script></body></html>